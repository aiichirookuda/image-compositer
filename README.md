# Image Compositer

3つの画像フォルダから画像を読み込み、すべての組み合わせをアルファ合成で生成するPythonスクリプトです。

## 概要

`a`、`b`、`c` の3つのフォルダに配置された画像を読み込み、それぞれの画像をアルファ合成で重ね合わせた画像を生成します。すべての組み合わせ（a × b × c）が自動的に生成され、`out` フォルダに保存されます。

## 主な機能

- 3つのフォルダ（a, b, c）から画像を自動読み込み
- すべての組み合わせを自動生成
- アルファ合成による画像の重ね合わせ
- サイズが異なる画像は自動リサイズ（LANCZOS補間）
- 進捗状況の表示（100枚ごと）
- 処理時間の計測

## 必要な環境

- Python 3.7以上
- Pillow (PIL)

## セットアップ

1. 必要なパッケージをインストールします：

```bash
pip install Pillow
```

または、仮想環境を使用する場合：

```bash
python -m venv .venv
source .venv/bin/activate  # Windowsの場合は: .venv\Scripts\activate
pip install Pillow
```

## 使用方法

1. プロジェクトディレクトリに以下のフォルダ構造を作成します：

```
image-compositer/
├── a/          # 第1レイヤーの画像を配置
├── b/          # 第2レイヤーの画像を配置
├── c/          # 第3レイヤーの画像を配置
└── out/        # 出力先（自動生成されます）
```

2. 各フォルダ（a, b, c）に画像ファイルを配置します。

   - 対応形式: `.png`, `.jpg`, `.jpeg`, `.webp`
   - 画像はアルファチャンネル（透明度）に対応している必要があります

3. スクリプトを実行します：

```bash
python composite_all.py
```

## 出力

- 生成された画像は `out` フォルダに保存されます
- ファイル名の形式: `a{元のファイル名}_b{元のファイル名}_c{元のファイル名}.png`
- 例: `a11_b11_c30.png`

## 処理の流れ

1. `a`、`b`、`c` フォルダから画像ファイルを読み込み
2. 各画像をRGBA形式に変換
3. サイズが異なる場合は、`a` フォルダの画像サイズに合わせて自動リサイズ
4. アルファ合成を実行（a → b → c の順に重ね合わせ）
5. 結果を `out` フォルダに保存

## 注意事項

- 各フォルダ（a, b, c）には最低1枚以上の画像が必要です
- 画像のサイズが異なる場合、`a` フォルダの画像サイズに合わせてリサイズされます
- 組み合わせ数が多い場合、処理に時間がかかる可能性があります
- 進捗は100枚ごとに表示されます

## 制限事項

- アルファチャンネル（透明度）を持つ画像のみを正しく処理できます
- 出力形式はPNGのみです
- メモリ使用量は画像のサイズと組み合わせ数に依存します

## ライセンス

このプロジェクトのライセンス情報は含まれていません。
